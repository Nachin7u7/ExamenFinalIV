name: Deployment-Notification-QA

on:
  deployment_status:
    branches:
      - QA

jobs:
  notify:
    runs-on: ubuntu-latest
    
    steps:
      - name: Discord Webhook Action for Deployment Status
        if: github.event.deployment.ref == 'refs/heads/QA' # Verifica si el despliegue es en la rama "QA"
        uses: tsickert/discord-webhook@v5.3.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          embed-title: "ğŸš€ Estado de Despliegue ğŸš€"
          embed-color: "5801101" # equivalente a 0x059f3d en decimal
          embed-description: |
            ğŸ“¡ Despliegue: ${{ github.event.deployment.description }}

            ğŸ“ Estado: ${{ github.event.deployment_status.state }}

            ğŸ‘· Entorno: ${{ github.event.deployment.environment }}

            ğŸ”— URL del Despliegue: ${{ github.event.deployment_status.target_url }}

            ğŸ“‹ Commit: ${{ github.event.deployment.sha }}

            ğŸ” Creado por: ${{ github.event.deployment.creator.login }}

            ğŸ•“ Creado en: ${{ github.event.deployment.created_at }}

            {% if github.event.deployment_status.state == 'success' %}
            â­ Despliegue exitoso en QA â­
            {% endif %}
